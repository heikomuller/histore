

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>histore.archive.schema module &mdash; History Store for Data Frames 0.4.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="histore.archive.snapshot module" href="histore.archive.snapshot.html" />
    <link rel="prev" title="histore.archive.row module" href="histore.archive.row.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> History Store for Data Frames
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">HISTORE - Data Frame History Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documents.html">Snapshot Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serialize.html">Json Serialization of Archives</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">histore</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="histore.html">histore package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="histore.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="histore.archive.html">histore.archive package</a></li>
<li class="toctree-l4"><a class="reference internal" href="histore.cli.html">histore.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="histore.document.html">histore.document package</a></li>
<li class="toctree-l4"><a class="reference internal" href="histore.tests.html">histore.tests package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="histore.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">History Store for Data Frames</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">histore</a> &raquo;</li>
        
          <li><a href="histore.html">histore package</a> &raquo;</li>
        
          <li><a href="histore.archive.html">histore.archive package</a> &raquo;</li>
        
      <li>histore.archive.schema module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/source/api/histore.archive.schema.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-histore.archive.schema">
<span id="histore-archive-schema-module"></span><h1>histore.archive.schema module<a class="headerlink" href="#module-histore.archive.schema" title="Permalink to this headline">¶</a></h1>
<p>Columns in an archive schema all have unique identifier together with
timestamped names and positions.</p>
<dl class="py class">
<dt id="histore.archive.schema.ArchiveColumn">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">histore.archive.schema.</span></code><code class="sig-name descname"><span class="pre">ArchiveColumn</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifier</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="histore.archive.timestamp.html#histore.archive.timestamp.Timestamp" title="histore.archive.timestamp.Timestamp"><span class="pre">histore.archive.timestamp.Timestamp</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#histore.archive.schema.ArchiveColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Archive columns have a unique identifier together with a timestamped
name and schema position.</p>
<dl class="py method">
<dt id="histore.archive.schema.ArchiveColumn.at_version">
<code class="sig-name descname"><span class="pre">at_version</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#histore.archive.schema.ArchiveColumn.at_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name and schema position for the column in the given
version of a dataset. Returns a tuple of (name, pos).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em>) – Unique version identifier.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(string, int)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="histore.archive.schema.ArchiveColumn.diff">
<code class="sig-name descname"><span class="pre">diff</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original_version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="histore.archive.provenance.base.html#histore.archive.provenance.base.ProvOp" title="histore.archive.provenance.base.ProvOp"><span class="pre">histore.archive.provenance.base.ProvOp</span></a><a class="headerlink" href="#histore.archive.schema.ArchiveColumn.diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Get provenance information representing the difference for this
column between the original version and a new version.</p>
<p>The three main types of changes that the column can experience are:</p>
<ul class="simple">
<li><p>InsertColumn: The column did not exists in the original version but
in the new version.</p></li>
<li><p>DeleteColumn: The column did exist in the original version but not in
the new version.</p></li>
<li><p>UpdateColumn: Column updates can be comprised of two types of
changes: (i) The column position changed, or (ii) the column name
changed.</p></li>
</ul>
<p>If the column has no changes between both versions the result is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>original_version</strong> (<em>int</em>) – Unique identifier for the original version.</p></li>
<li><p><strong>new_version</strong> (<em>int</em>) – Unique identifier for the version that the original version is
compared against.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="histore.archive.provenance.base.html#histore.archive.provenance.base.ProvOp" title="histore.archive.provenance.base.ProvOp">histore.archive.provenance.base.ProvOp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="histore.archive.schema.ArchiveColumn.merge">
<code class="sig-name descname"><span class="pre">merge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn"><span class="pre">histore.archive.schema.ArchiveColumn</span></a><a class="headerlink" href="#histore.archive.schema.ArchiveColumn.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a modified version of the column for the given version. Adds
the name and index position to the respective history of the column.
Returns a modified copy of the column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Column name.</p></li>
<li><p><strong>pos</strong> (<em>int</em>) – Position of the column in the snapshot schema.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn">histore.archive.schema.ArchiveColumn</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="histore.archive.schema.ArchiveColumn.rollback">
<code class="sig-name descname"><span class="pre">rollback</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn"><span class="pre">histore.archive.schema.ArchiveColumn</span></a><a class="headerlink" href="#histore.archive.schema.ArchiveColumn.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the versions of the column.</p>
<p>Truncates the timestamps of the column to the given rollback version.
Returns a new archive column object or None if the column did not exist
at or prior to the rollback version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em>) – Unique identifier of the rollback version.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn">histore.archive.schema.ArchiveColumn</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="histore.archive.schema.ArchiveSchema">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">histore.archive.schema.</span></code><code class="sig-name descname"><span class="pre">ArchiveSchema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn"><span class="pre">histore.archive.schema.ArchiveColumn</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#histore.archive.schema.ArchiveSchema" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The archive schema maintains an index of columns in the history of a
dataset. Each column has a unique identifier together with timestamped
names and positions.</p>
<dl class="py method">
<dt id="histore.archive.schema.ArchiveSchema.at_version">
<code class="sig-name descname"><span class="pre">at_version</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="histore.document.schema.html#histore.document.schema.Column" title="histore.document.schema.Column"><span class="pre">histore.document.schema.Column</span></a><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#histore.archive.schema.ArchiveSchema.at_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the schema for the snapshot at the given version of a dataset.
Returns a list of snapshot columns in their original order.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em>) – Unique version identifier.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list(<a class="reference internal" href="histore.document.schema.html#histore.document.schema.Column" title="histore.document.schema.Column">histore.document.schema.Column</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="histore.archive.schema.ArchiveSchema.merge">
<code class="sig-name descname"><span class="pre">merge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="histore.document.schema.html#histore.document.schema.Column" title="histore.document.schema.Column"><span class="pre">histore.document.schema.Column</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">renamed</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#histore.archive.schema.ArchiveSchema" title="histore.archive.schema.ArchiveSchema"><span class="pre">histore.archive.schema.ArchiveSchema</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#histore.archive.schema.ArchiveSchema.merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the given snapshot columns to the schema history for a dataset.</p>
<p>Expects a list of strings or identifiable column objects. If column
objects are given their identifier must match an existing identifier
in the schema and all identifier have to be unique. Column names that
are given as string-only are considered to be new columns.</p>
<p>When matching by name the columns in the given list are matched against
columns in the schema of the origin version. Columns that are unmatched
are considered new columns. If the list of columns of the origin
schema contains duplicate column names matching by name is not possible
and an error is raised.</p>
<p>Returns the new archive schema and a list of column identifier for the
document columns. The order in the identifier list corresponds to the
order of columns in the document schema.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>columns</strong> (<em>list</em>) – List of column names in their original order. Column names can
either be strings of snapshot columns.</p></li>
<li><p><strong>version</strong> (<em>int</em>) – Identifier of the new version.</p></li>
<li><p><strong>origin</strong> (<em>int</em>) – Identifier of the previos snapshot. This identifier is required
when matching columns by name.</p></li>
<li><p><strong>renamed</strong> (<em>list of tuple of str, str, default=None</em>) – Optional mapping of columns that have been renamed. Tuples contain
the old and the new columns name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#histore.archive.schema.ArchiveSchema" title="histore.archive.schema.ArchiveSchema">histore.archive.schema.ArchiveSchema</a>, list</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="histore.archive.schema.ArchiveSchema.rollback">
<code class="sig-name descname"><span class="pre">rollback</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#histore.archive.schema.ArchiveSchema" title="histore.archive.schema.ArchiveSchema"><span class="pre">histore.archive.schema.ArchiveSchema</span></a><a class="headerlink" href="#histore.archive.schema.ArchiveSchema.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback timestamps of the archive schema.</p>
<p>Truncates the timestamp of all columns. Returns a new schema containing
only those columns that existed prior or at the given rollback version.
the result may be an empty schema but never None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em>) – Unique identifier of the rollback version.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#histore.archive.schema.ArchiveSchema" title="histore.archive.schema.ArchiveSchema">histore.archive.schema.ArchiveSchema</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="histore.archive.schema.create_column">
<code class="sig-prename descclassname"><span class="pre">histore.archive.schema.</span></code><code class="sig-name descname"><span class="pre">create_column</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">colid</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn"><span class="pre">histore.archive.schema.ArchiveColumn</span></a><a class="headerlink" href="#histore.archive.schema.create_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new archive column object for a document schema column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>colid</strong> (<em>int</em>) – Unique column identifier.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Column name.</p></li>
<li><p><strong>pos</strong> (<em>int</em>) – Column positon in the document schema.</p></li>
<li><p><strong>version</strong> (<em>int</em>) – Snapshot version identifier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#histore.archive.schema.ArchiveColumn" title="histore.archive.schema.ArchiveColumn">histore.archive.schema.ArchiveColumn</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histore.archive.schema.document_schema">
<code class="sig-prename descclassname"><span class="pre">histore.archive.schema.</span></code><code class="sig-name descname"><span class="pre">document_schema</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="histore.document.schema.html#histore.document.schema.Column" title="histore.document.schema.Column"><span class="pre">histore.document.schema.Column</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#histore.archive.schema.document_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Create type-dependent mappings for document schema columns.</p>
<p>For columns that are identifiable a mapping from the column identifier to
tuples of column objects and their index position is created. A ValueError
is raised if the identifier is not unique.</p>
<p>For columns that are not identifiable a second mapping is created that maps
their name to their index position. Raises a ValueError if the names of
non-identifiable columns are not unique.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>columns</strong> (<em>list</em>) – List of column names in their original order. Column names can
either be strings of snapshot columns.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple of dict, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="histore.archive.schema.schema_mapping">
<code class="sig-prename descclassname"><span class="pre">histore.archive.schema.</span></code><code class="sig-name descname"><span class="pre">schema_mapping</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Column</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#histore.archive.schema.schema_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a mapping of column names in the schema of the previous snapshot
to their column identifier.</p>
<p>Column names are mapped to lists of identifiers since column names do not
have to be unique.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>columns</strong> (<em>list of histore.document.schema.Column</em>) – Columns in a document schema.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="histore.archive.snapshot.html" class="btn btn-neutral float-right" title="histore.archive.snapshot module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="histore.archive.row.html" class="btn btn-neutral float-left" title="histore.archive.row module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2021, Heiko Mueller.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>